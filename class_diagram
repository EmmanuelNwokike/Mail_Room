classDiagram
    %% === Core Domain Classes ===
    class Resident {
        +int id
        +string fullName
        +string email
        +int unitNumber
        +string getContactEmail()
    }

    class StaffUser {
        +string username
        +string passwordHash
        +string displayName
        +bool login(string password)
    }

    class Package {
        +int id
        +string trackingNumber
        +CarrierType carrier
        +DateTime deliveryDate
        +DateTime pickupDate
        +PackageStatus status
        +string labelName
        +Resident resident  // optional: null if UNKNOWN
    }

    enum CarrierType {
        USPS
        UPS
        FedEx
        Other
    }

    enum PackageStatus {
        PENDING
        UNKNOWN
        PICKED_UP
        RETURNED
    }

    class MailroomSystem {
        +bool login(string username, string password)
        +Package recordDeliveredPackage(int residentId, CarrierType carrier, string trackingNumber, string labelName)
        +Package recordUnknownPackage(string labelName, CarrierType carrier, DateTime deliveryDate)
        +void markPackagePickedUp(int packageId)
        +List~Package~ getPackageHistory(string residentName, int unitNumber)
        +List~Package~ getPendingPackages()
        +List~Package~ getUnknownPackages()
    }

    %% === Email Service ===
    class EmailService {
        <<interface>>
        +void sendPackageNotification(Resident resident, Package package)
    }

    class SmtpEmailService {
        +string smtpHost
        +int smtpPort
        +string senderEmail
        +string senderPassword
        +void sendPackageNotification(Resident resident, Package package)
    }

    %% === Repositories / Data Access Layer ===
    class ResidentRepository {
        +Resident~?~ findByNameAndUnit(string fullName, int unitNumber)
        +Resident~?~ findById(int id)
    }

    class StaffRepository {
        +StaffUser~?~ findByUsername(string username)
    }

    class PackageRepository {
        +void save(Package package)
        +Package~?~ findById(int id)
        +List~Package~ findPending()
        +List~Package~ findUnknown()
        +List~Package~ findHistoryByResident(string residentName, int unitNumber)
    }

    %% === Relationships ===
    Resident "1" --> "0..*" Package : has

    MailroomSystem --> ResidentRepository : uses
    MailroomSystem --> StaffRepository : uses
    MailroomSystem --> PackageRepository : uses
    MailroomSystem --> EmailService : uses

    SmtpEmailService ..|> EmailService
